FROM ollama/ollama:latest

# Expose the Ollama API port
EXPOSE 11434

# Create a startup script
RUN echo '#!/bin/sh\n\
/usr/local/bin/ollama serve & \n\
sleep 5 \n\
/usr/local/bin/ollama pull llama3 \n\
wait' > /start.sh && chmod +x /start.sh

# Use the startup script as the entrypoint
CMD ["/start.sh"] 